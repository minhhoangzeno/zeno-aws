{"version":3,"file":"static/js/658.393ba777.chunk.js","mappings":"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","sources":["apis/categoryBlog.api.ts","components/edit-table-cell/index.tsx","pages/category-blog/index.tsx"],"sourcesContent":["import { Method, request } from \"../helper/request.helper\";\r\nimport { ICategoryBlog } from \"../interface/CategoryBlog.interface\";\r\n\r\nexport class CategoryBlogAPI {\r\n    static readonly COMPONENT_NAME: string = \"CategoryBlogs\";\r\n\r\n    static fetchAll = () => {\r\n        return request({\r\n            method: Method.GET,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            params: {\r\n                filter: {\r\n                    order: \"createdAt DESC\",\r\n                },\r\n            },\r\n        });\r\n    };\r\n\r\n    static create = (data: ICategoryBlog) => {\r\n        return request({\r\n            method: Method.POST,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            data,\r\n        });\r\n    };\r\n\r\n    static update = (id: number, data: ICategoryBlog) => {\r\n        return request({\r\n            method: Method.PATCH,\r\n            url: `/${this.COMPONENT_NAME}/${id}`,\r\n            data,\r\n        });\r\n    };\r\n\r\n    static delete = (id: number) => {\r\n        return request({\r\n            method: Method.DELETE,\r\n            url: `/${this.COMPONENT_NAME}/${id}`,\r\n        });\r\n    };\r\n}\r\n","import { Form, Input, InputNumber } from \"antd\";\r\n\r\ninterface EditableCellProps extends React.HTMLAttributes<HTMLElement> {\r\n  editing: boolean;\r\n  dataIndex: string;\r\n  title: string;\r\n  inputType: \"number\" | \"text\";\r\n  record: unknown;\r\n  index: number;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const EditableCell: React.FC<EditableCellProps> = ({\r\n  editing,\r\n  dataIndex,\r\n  title,\r\n  inputType,\r\n  record,\r\n  index,\r\n  children,\r\n  ...restProps\r\n}) => {\r\n  const inputNode = inputType === \"number\" ? <InputNumber /> : <Input />;\r\n\r\n  return (\r\n    <td {...restProps}>\r\n      {editing ? (\r\n        <Form.Item\r\n          name={dataIndex}\r\n          style={{ margin: 0 }}\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: `Please Input ${title}!`,\r\n            },\r\n          ]}\r\n        >\r\n          {inputNode}\r\n        </Form.Item>\r\n      ) : (\r\n        children\r\n      )}\r\n    </td>\r\n  );\r\n};\r\n","import { CheckOutlined, CloseOutlined, CopyOutlined, DeleteOutlined, EditOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { Button, Form, message, Popconfirm, Row, Table, Tooltip, Typography } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { CategoryBlogAPI } from \"../../apis/categoryBlog.api\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\r\nimport {\r\n    AddCategoryBlog,\r\n    UpdateCategoryBlog,\r\n    DeleteCategoryBlog,\r\n    SetCategoryBlog,\r\n    GetCategoryBlog,\r\n} from \"../../app/reducers/CategoryBlog/CategoryBlog.reducer\";\r\nimport { EditableCell } from \"../../components/edit-table-cell\";\r\nimport { ICategoryBlog } from \"../../interface/CategoryBlog.interface\";\r\n\r\nconst { Title } = Typography;\r\n\r\nexport default function CategoryBlog() {\r\n    const data = useAppSelector(GetCategoryBlog);\r\n    const dispatch = useAppDispatch();\r\n    useEffect(() => {\r\n        CategoryBlogAPI.fetchAll().then((result: any) => {\r\n            dispatch(SetCategoryBlog(result.data));\r\n        });\r\n    }, [dispatch]);\r\n    const [form] = Form.useForm();\r\n    const isEditing = (record: ICategoryBlog) => record.id === editingKey;\r\n    const [editingKey, setEditingKey] = useState<number | undefined>();\r\n\r\n    const edit = (record: Partial<ICategoryBlog>) => {\r\n        form.setFieldsValue({ ...record });\r\n        setEditingKey(record.id);\r\n    };\r\n\r\n    const cancel = () => {\r\n        setEditingKey(undefined);\r\n    };\r\n    const save = (id?: number) => {\r\n        try {\r\n            if (id) {\r\n                const values = form.getFieldsValue() as ICategoryBlog;\r\n                let isError = false;\r\n                const errors = form.getFieldsError();\r\n\r\n                errors.forEach((el) => {\r\n                    if (el.errors.length > 0) {\r\n                        isError = true;\r\n                    }\r\n                });\r\n\r\n                if (!isError) {\r\n                    CategoryBlogAPI.update(id, values).then((result: any) => {\r\n                        setEditingKey(undefined);\r\n                        dispatch(UpdateCategoryBlog(result.data));\r\n                    });\r\n                } else {\r\n                    message.error(\"Validate Failed\");\r\n                }\r\n            } else {\r\n                message.error(\"Validate Failed\");\r\n            }\r\n        } catch (errInfo) {\r\n            console.log(\"Validate Failed:\", errInfo);\r\n        }\r\n    };\r\n    const duplicate = (record: Partial<ICategoryBlog>) => {\r\n        CategoryBlogAPI.create({\r\n            title: record.title,\r\n        }).then((result: any) => {\r\n            dispatch(AddCategoryBlog(result.data));\r\n        });\r\n    };\r\n    const remove = (record: Partial<ICategoryBlog>) => {\r\n        if (record.id) {\r\n            CategoryBlogAPI.delete(record.id).then((result: any) => {\r\n                dispatch(DeleteCategoryBlog(record));\r\n            });\r\n        }\r\n    };\r\n    const columns = [\r\n        {\r\n            title: \"STT\",\r\n            dataIndex: \"id\",\r\n            render: (_: null, record: ICategoryBlog) => {\r\n                const idx = data.findIndex((el: ICategoryBlog) => el.id === record.id);\r\n                return <Typography.Title level={5}>{idx + 1}</Typography.Title>;\r\n            },\r\n        },\r\n        {\r\n            title: \"Tiêu đề\",\r\n            dataIndex: \"title\",\r\n            width: \"30%\",\r\n            editable: true,\r\n        },\r\n        {\r\n            title: \"Thiết lập\",\r\n            render: (_: null, record: ICategoryBlog) => {\r\n                const editTable = isEditing(record);\r\n                return editTable ? (\r\n                    <>\r\n                        <Tooltip title=\"Lưu\">\r\n                            <Typography.Link className=\"mr-4\" onClick={() => save(record.id)}>\r\n                                <CheckOutlined style={{ fontSize: \"130%\" }} />\r\n                            </Typography.Link>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Đóng\">\r\n                            <Typography.Link onClick={cancel}>\r\n                                <CloseOutlined style={{ fontSize: \"130%\" }} />\r\n                            </Typography.Link>\r\n                        </Tooltip>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <Tooltip title=\"Sửa\">\r\n                            <Typography.Link className=\"mr-4\" disabled={editingKey !== undefined} onClick={() => edit(record)}>\r\n                                <EditOutlined style={{ fontSize: \"130%\" }} />\r\n                            </Typography.Link>\r\n                        </Tooltip>\r\n                        <Popconfirm\r\n                            title=\"Bạn có chắc chắn muốn xóa không?\"\r\n                            onConfirm={() => {\r\n                                remove(record);\r\n                            }}\r\n                        >\r\n                            <Typography.Link className=\"mr-4\">\r\n                                <DeleteOutlined style={{ fontSize: \"130%\" }} />\r\n                            </Typography.Link>\r\n                        </Popconfirm>\r\n\r\n                        <Popconfirm title=\"Bạn có muốn nhân bản danh mục này không?\" onConfirm={() => duplicate(record)}>\r\n                            <Typography.Link>\r\n                                <CopyOutlined style={{ fontSize: \"130%\" }} />\r\n                            </Typography.Link>\r\n                        </Popconfirm>\r\n                    </>\r\n                );\r\n            },\r\n        },\r\n    ];\r\n\r\n    const mergedColumns = columns.map((col) => {\r\n        if (!col.editable) {\r\n            return col;\r\n        }\r\n        return {\r\n            ...col,\r\n            onCell: (record: ICategoryBlog) => ({\r\n                record: record,\r\n                inputType: col.dataIndex === \"price\" ? \"number\" : \"text\",\r\n                dataIndex: col.dataIndex,\r\n                title: col.title,\r\n                editing: isEditing(record),\r\n            }),\r\n        };\r\n    });\r\n\r\n    const add = () => {\r\n        CategoryBlogAPI.create({\r\n            title: \"CategoryBlog\",\r\n        }).then((result: any) => {\r\n            dispatch(AddCategoryBlog(result.data));\r\n        });\r\n    };\r\n    return (\r\n        <>\r\n            <Row>\r\n                <Title level={3}>Danh mục bài viết</Title>\r\n            </Row>\r\n            <Row className=\"mb-4\">\r\n                <Button type=\"primary\" icon={<PlusOutlined />} className=\"mr-4\" onClick={add}>\r\n                    Thêm mới\r\n                </Button>\r\n            </Row>\r\n            <Form form={form} component={false}>\r\n                <Table\r\n                    columns={mergedColumns}\r\n                    components={{\r\n                        body: {\r\n                            cell: EditableCell,\r\n                        },\r\n                    }}\r\n                    dataSource={data}\r\n                    bordered\r\n                    rowKey=\"id\"\r\n                    pagination={{ pageSize: 10 }}\r\n                />\r\n            </Form>\r\n        </>\r\n    );\r\n}\r\n"],"names":["CategoryBlogAPI","_createClass","_classCallCheck","COMPONENT_NAME","fetchAll","request","method","Method","url","concat","params","filter","order","create","data","update","id","delete","EditableCell","_ref","editing","dataIndex","title","inputType","children","record","index","restProps","_objectWithoutProperties","_excluded","inputNode","_jsx","InputNumber","Input","_objectSpread","Form","name","style","margin","rules","required","message","Title","Typography","CategoryBlog","useAppSelector","GetCategoryBlog","dispatch","useAppDispatch","useEffect","then","result","SetCategoryBlog","_Form$useForm","form","_slicedToArray","isEditing","editingKey","_useState","useState","_useState2","setEditingKey","cancel","undefined","mergedColumns","render","_","idx","findIndex","el","level","width","editable","_jsxs","_Fragment","Tooltip","className","onClick","values","getFieldsValue","isError","getFieldsError","forEach","errors","length","UpdateCategoryBlog","errInfo","console","log","save","CheckOutlined","fontSize","CloseOutlined","disabled","setFieldsValue","edit","EditOutlined","Popconfirm","onConfirm","DeleteCategoryBlog","remove","DeleteOutlined","AddCategoryBlog","duplicate","CopyOutlined","map","col","onCell","Row","Button","type","icon","PlusOutlined","component","Table","columns","components","body","cell","dataSource","bordered","rowKey","pagination","pageSize"],"sourceRoot":""}