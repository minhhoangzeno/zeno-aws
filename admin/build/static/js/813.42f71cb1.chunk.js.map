{"version":3,"file":"static/js/813.42f71cb1.chunk.js","mappings":"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","sources":["apis/container.api.ts","components/edit-table-cell/index.tsx","helper/getFile.helper.ts","apis/banner.api.ts","pages/banner/index.tsx"],"sourcesContent":["import { Method, request } from \"../helper/request.helper\";\n\nexport class ContainerAPI {\n    static readonly COMPONENT_NAME: string = \"Containers\";\n\n    static upload = (file: File) => {\n        const data = new FormData();\n        data.append(\"file\", file);\n        return request({\n            method: Method.POST,\n            url: `/${this.COMPONENT_NAME}/image/upload`,\n            headers: {\n                \"Content-Type\": \"multipart/form-data\",\n            },\n            data,\n        });\n    };\n}\n","import { Form, Input, InputNumber } from \"antd\";\n\ninterface EditableCellProps extends React.HTMLAttributes<HTMLElement> {\n  editing: boolean;\n  dataIndex: string;\n  title: string;\n  inputType: \"number\" | \"text\";\n  record: unknown;\n  index: number;\n  children: React.ReactNode;\n}\n\nexport const EditableCell: React.FC<EditableCellProps> = ({\n  editing,\n  dataIndex,\n  title,\n  inputType,\n  record,\n  index,\n  children,\n  ...restProps\n}) => {\n  const inputNode = inputType === \"number\" ? <InputNumber /> : <Input />;\n\n  return (\n    <td {...restProps}>\n      {editing ? (\n        <Form.Item\n          name={dataIndex}\n          style={{ margin: 0 }}\n          rules={[\n            {\n              required: true,\n              message: `Please Input ${title}!`,\n            },\n          ]}\n        >\n          {inputNode}\n        </Form.Item>\n      ) : (\n        children\n      )}\n    </td>\n  );\n};\n","import { AppConfig } from \"../AppConfig\";\nexport const GetFile = (info: any) => {\n  const photoURL = `${AppConfig.apiUrl}/Containers/image/download/${info.result.files.file[0].name}`;\n  return photoURL;\n};\n","import { Method, request } from \"../helper/request.helper\";\nimport { IBanner } from \"../interface/Banner.interface\";\n\nexport class BannerAPI {\n    static readonly COMPONENT_NAME: string = \"Banners\";\n\n    static fetchAll = () => {\n        return request({\n            method: Method.GET,\n            url: `/${this.COMPONENT_NAME}`,\n            params: {\n                filter: {\n                    order: \"createdAt DESC\",\n                },\n            },\n        });\n    };\n\n    static create = (data: IBanner) => {\n      console.log(\"data\",data);\n      \n        return request({\n            method: Method.POST,\n            url: `/${this.COMPONENT_NAME}`,\n            data,\n        });\n    };\n\n    static update = (id: number, data: IBanner) => {\n        return request({\n            method: Method.PATCH,\n            url: `/${this.COMPONENT_NAME}/${id}`,\n            data,\n        });\n    };\n\n    static delete = (id: number) => {\n        return request({\n            method: Method.DELETE,\n            url: `/${this.COMPONENT_NAME}/${id}`,\n        });\n    };\n}\n","import {\n  DeleteOutlined,\n  PlusOutlined,\n  UploadOutlined,\n} from \"@ant-design/icons\";\nimport {\n  Button,\n  Image,\n  Popconfirm,\n  Row,\n  Table,\n  Typography,\n  Upload,\n} from \"antd\";\nimport { RcFile, UploadChangeParam } from \"antd/es/upload\";\nimport { useEffect } from \"react\";\nimport { BannerAPI } from \"../../apis/banner.api\";\nimport { ContainerAPI } from \"../../apis/container.api\";\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\nimport {\n  AddBanner,\n  DeleteBanner,\n  GetBanner,\n  SetBanner,\n  UpdateBanner,\n} from \"../../app/reducers/Banner/Banner.reducer\";\nimport productPNG from \"../../assets/images/product.png\";\nimport { EditableCell } from \"../../components/edit-table-cell\";\nimport { GetFile } from \"../../helper/getFile.helper\";\nimport { IBanner } from \"../../interface/Banner.interface\";\nimport { ICategoryBlog } from \"../../interface/CategoryBlog.interface\";\n\nconst { Title } = Typography;\n\nexport default function Banner() {\n  const data = useAppSelector(GetBanner);\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    BannerAPI.fetchAll().then((result: any) => {\n      dispatch(SetBanner(result.data));\n    });\n  }, [dispatch]);\n\n  const remove = (record: Partial<IBanner>) => {\n    if (record.id) {\n      BannerAPI.delete(record.id).then(() => {\n        dispatch(DeleteBanner(record));\n      });\n    }\n  };\n  const upload = (record: IBanner, info: UploadChangeParam) => {\n    ContainerAPI.upload(info.file.originFileObj as File).then((result) => {\n      const photoURL = GetFile(result.data);\n      if (record.id) {\n        BannerAPI.update(record.id, { ...record, photoURL }).then((result) => {\n          dispatch(UpdateBanner(result.data));\n        });\n      }\n    });\n  };\n  const columns = [\n    {\n      title: \"STT\",\n      dataIndex: \"id\",\n      render: (_: null, record: ICategoryBlog) => {\n        const idx = data.findIndex((el: ICategoryBlog) => el.id === record.id);\n        return <Typography.Title level={5}>{idx + 1}</Typography.Title>;\n      },\n    },\n    {\n      title: \"Ảnh\",\n      dataIndex: \"Background\",\n      width: \"40%\",\n      render: (_: null, record: IBanner) => {\n        return (\n          <Row className=\"flex-col\">\n            <Image\n              src={record.photoURL ? record.photoURL : productPNG}\n              height={150}\n            />\n            <Upload\n              customRequest={(options) => {\n                if (options.onSuccess) {\n                  options.onSuccess(\"ok\");\n                }\n              }}\n              onChange={(e) => upload(record, e)}\n              maxCount={1}\n              showUploadList={false}\n              className=\"cursor-pointer mt-4\"\n            >\n              <Button type=\"default\" icon={<UploadOutlined />} className=\"mr-4\">\n                Thay đổi\n              </Button>\n            </Upload>\n          </Row>\n        );\n      },\n    },\n    {\n      title: \"Thiết lập\",\n      render: (_: null, record: IBanner) => {\n        return (\n          <Popconfirm\n            title=\"Bạn có chắc chắn muốn xóa không?\"\n            onConfirm={() => {\n              remove(record);\n            }}\n          >\n            <Typography.Link className=\"mr-4\">\n              <DeleteOutlined style={{ fontSize: \"130%\" }} />\n            </Typography.Link>\n          </Popconfirm>\n        );\n      },\n    },\n  ];\n\n  const beforeUpload = (file: RcFile) => {\n    // Access file content here and do something with it\n    ContainerAPI.upload(file as File).then((result) => {\n      const photoURL = GetFile(result.data);\n      if (photoURL) {\n        BannerAPI.create({ photoURL }).then((result) => {\n          dispatch(AddBanner(result.data));\n        });\n      }\n    });\n    // Prevent upload\n    return false;\n  };\n\n  return (\n    <>\n      <Row>\n        <Title level={3}>Ảnh bìa khuyến mãi</Title>\n      </Row>\n      <Row className=\"mb-4\">\n        <Upload\n          customRequest={(options) => {\n            if (options.onSuccess) {\n              options.onSuccess(\"ok\");\n            }\n          }}\n          maxCount={1}\n          showUploadList={false}\n          className=\"cursor-pointer\"\n          beforeUpload={beforeUpload}\n        >\n          <Button type=\"primary\" icon={<PlusOutlined />} className=\"mr-4\">\n            Thêm mới\n          </Button>\n        </Upload>\n      </Row>\n      <Table\n        columns={columns}\n        components={{\n          body: {\n            cell: EditableCell,\n          },\n        }}\n        dataSource={data}\n        bordered\n        rowKey=\"id\"\n        pagination={{ pageSize: 10 }}\n      />\n    </>\n  );\n}\n"],"names":["ContainerAPI","_createClass","_classCallCheck","COMPONENT_NAME","upload","file","data","FormData","append","request","method","Method","url","concat","headers","EditableCell","_ref","editing","dataIndex","title","inputType","children","record","index","restProps","_objectWithoutProperties","_excluded","inputNode","_jsx","InputNumber","Input","_objectSpread","Form","name","style","margin","rules","required","message","GetFile","info","AppConfig","result","files","BannerAPI","fetchAll","params","filter","order","create","console","log","update","id","delete","Title","Typography","Banner","useAppSelector","GetBanner","dispatch","useAppDispatch","useEffect","then","SetBanner","columns","render","_","idx","findIndex","el","level","width","_jsxs","Row","className","Image","src","photoURL","productPNG","height","Upload","customRequest","options","onSuccess","onChange","e","originFileObj","UpdateBanner","maxCount","showUploadList","Button","type","icon","UploadOutlined","Popconfirm","onConfirm","DeleteBanner","remove","DeleteOutlined","fontSize","_Fragment","beforeUpload","AddBanner","PlusOutlined","Table","components","body","cell","dataSource","bordered","rowKey","pagination","pageSize"],"sourceRoot":""}