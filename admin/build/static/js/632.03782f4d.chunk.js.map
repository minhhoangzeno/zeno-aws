{"version":3,"file":"static/js/632.03782f4d.chunk.js","mappings":"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","sources":["apis/categoryProduct.api.ts","apis/container.api.ts","components/edit-table-cell/index.tsx","helper/getFile.helper.ts","apis/product.api.ts","pages/product/index.tsx"],"sourcesContent":["import { Method, request } from \"../helper/request.helper\";\r\nimport { ICategoryProduct } from \"../interface/CategoryProduct.interface\";\r\n\r\nexport class CategoryProductAPI {\r\n    static readonly COMPONENT_NAME: string = \"CategoryProducts\";\r\n\r\n    static fetchAll = () => {\r\n        return request({\r\n            method: Method.GET,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            params: {\r\n                filter: {\r\n                    order: \"createdAt DESC\",\r\n                },\r\n            },\r\n        });\r\n    };\r\n\r\n    static create = (data: ICategoryProduct) => {\r\n        return request({\r\n            method: Method.POST,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            data,\r\n        });\r\n    };\r\n\r\n    static update = (id: number, data: ICategoryProduct) => {\r\n        return request({\r\n            method: Method.PATCH,\r\n            url: `/${this.COMPONENT_NAME}/${id}`,\r\n            data,\r\n        });\r\n    };\r\n\r\n    static delete = (id: number) => {\r\n        return request({\r\n            method: Method.DELETE,\r\n            url: `/${this.COMPONENT_NAME}/${id}`,\r\n        });\r\n    };\r\n}\r\n","import { Method, request } from \"../helper/request.helper\";\r\n\r\nexport class ContainerAPI {\r\n    static readonly COMPONENT_NAME: string = \"Containers\";\r\n\r\n    static upload = (file: File) => {\r\n        const data = new FormData();\r\n        data.append(\"file\", file);\r\n        return request({\r\n            method: Method.POST,\r\n            url: `/${this.COMPONENT_NAME}/image/upload`,\r\n            headers: {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n            data,\r\n        });\r\n    };\r\n}\r\n","import { Form, Input, InputNumber } from \"antd\";\r\n\r\ninterface EditableCellProps extends React.HTMLAttributes<HTMLElement> {\r\n  editing: boolean;\r\n  dataIndex: string;\r\n  title: string;\r\n  inputType: \"number\" | \"text\";\r\n  record: unknown;\r\n  index: number;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const EditableCell: React.FC<EditableCellProps> = ({\r\n  editing,\r\n  dataIndex,\r\n  title,\r\n  inputType,\r\n  record,\r\n  index,\r\n  children,\r\n  ...restProps\r\n}) => {\r\n  const inputNode = inputType === \"number\" ? <InputNumber /> : <Input />;\r\n\r\n  return (\r\n    <td {...restProps}>\r\n      {editing ? (\r\n        <Form.Item\r\n          name={dataIndex}\r\n          style={{ margin: 0 }}\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: `Please Input ${title}!`,\r\n            },\r\n          ]}\r\n        >\r\n          {inputNode}\r\n        </Form.Item>\r\n      ) : (\r\n        children\r\n      )}\r\n    </td>\r\n  );\r\n};\r\n","import { AppConfig } from \"../AppConfig\";\r\nexport const GetFile = (info: any) => {\r\n  const photoURL = `${AppConfig.apiUrl}/Containers/image/download/${info.result.files.file[0].name}`;\r\n  return photoURL;\r\n};\r\n","import { Method, request } from \"../helper/request.helper\";\r\nimport { IProduct } from \"../interface/Product.interface\";\r\n\r\nexport class ProductAPI {\r\n    static readonly COMPONENT_NAME: string = \"Products\";\r\n\r\n    static fetchAll = () => {\r\n        return request({\r\n            method: Method.GET,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            params: {\r\n                filter: {\r\n                    order: \"createdAt DESC\",\r\n                },\r\n            },\r\n        });\r\n    };\r\n\r\n    static createMulti = (req: IProduct[]) => {\r\n        return request({\r\n            method: Method.POST,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            data: req,\r\n        });\r\n    };\r\n\r\n    static create = (data: IProduct) => {\r\n        return request({\r\n            method: Method.POST,\r\n            url: `/${this.COMPONENT_NAME}`,\r\n            data,\r\n        });\r\n    };\r\n\r\n    static update = (id: number, data: IProduct) => {\r\n        return request({\r\n            method: Method.PATCH,\r\n            url: `/${this.COMPONENT_NAME}/${id}`,\r\n            data,\r\n        });\r\n    };\r\n\r\n    static delete = (id: number) => {\r\n        return request({\r\n            method: Method.DELETE,\r\n            url: `/${this.COMPONENT_NAME}/${id}`,\r\n        });\r\n    };\r\n}\r\n","import {\r\n  CheckOutlined,\r\n  CloseOutlined,\r\n  CopyOutlined,\r\n  DeleteOutlined,\r\n  EditOutlined,\r\n  PlusOutlined,\r\n} from \"@ant-design/icons\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Form,\r\n  message,\r\n  Popconfirm,\r\n  Row,\r\n  Select,\r\n  Table,\r\n  Tooltip,\r\n  Typography,\r\n  Upload,\r\n} from \"antd\";\r\nimport { UploadChangeParam } from \"antd/es/upload\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ContainerAPI } from \"../../apis/container.api\";\r\nimport { ProductAPI } from \"../../apis/product.api\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\r\nimport {\r\n  AddProduct,\r\n  DeleteProduct,\r\n  GetProduct,\r\n  SetProduct,\r\n  UpdateProduct,\r\n} from \"../../app/reducers/Product/Product.reducer\";\r\nimport {\r\n  SetCategoryProduct,\r\n  GetCategoryProduct,\r\n} from \"../../app/reducers/CategoryProduct/CategoryProduct.reducer\";\r\nimport productPNG from \"../../assets/images/product.png\";\r\nimport { EditableCell } from \"../../components/edit-table-cell\";\r\nimport { GetFile } from \"../../helper/getFile.helper\";\r\nimport { IProduct } from \"../../interface/Product.interface\";\r\nimport \"./index.css\";\r\n\r\nimport { ICategoryProduct } from \"../../interface/CategoryProduct.interface\";\r\nimport { CategoryProductAPI } from \"../../apis/categoryProduct.api\";\r\n\r\nconst { Title, Paragraph } = Typography;\r\nconst { Option } = Select;\r\nexport default function Product() {\r\n  const data = useAppSelector(GetProduct);\r\n  const categoryProduct = useAppSelector(GetCategoryProduct);\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    ProductAPI.fetchAll().then((result) => {\r\n      dispatch(SetProduct(result.data));\r\n    });\r\n    CategoryProductAPI.fetchAll().then((result) => {\r\n      dispatch(SetCategoryProduct(result.data));\r\n    });\r\n  }, [dispatch]);\r\n\r\n  const [form] = Form.useForm();\r\n  const isEditing = (record: IProduct) => record.id === editingKey;\r\n  const [editingKey, setEditingKey] = useState<number | undefined>();\r\n\r\n  const edit = (record: Partial<IProduct>) => {\r\n    form.setFieldsValue({ ...record });\r\n    setEditingKey(record.id);\r\n  };\r\n\r\n  const cancel = () => {\r\n    setEditingKey(undefined);\r\n  };\r\n\r\n  const save = (record: IProduct) => {\r\n    try {\r\n      if (record.id) {\r\n        const values = form.getFieldsValue() as IProduct;\r\n        let isError = false;\r\n        const errors = form.getFieldsError();\r\n\r\n        errors.forEach((el) => {\r\n          if (el.errors.length > 0) {\r\n            isError = true;\r\n          }\r\n        });\r\n\r\n        if (!isError) {\r\n          ProductAPI.update(record.id, values).then((result) => {\r\n            dispatch(UpdateProduct(result.data));\r\n            setEditingKey(undefined);\r\n          });\r\n        } else {\r\n          message.error(\"Validate Failed\");\r\n        }\r\n      } else {\r\n        message.error(\"Validate Failed\");\r\n      }\r\n    } catch (errInfo) {\r\n      console.log(\"Validate Failed:\", errInfo);\r\n    }\r\n  };\r\n\r\n  const upload = (record: IProduct, info: UploadChangeParam) => {\r\n    ContainerAPI.upload(info.file.originFileObj as File).then((result) => {\r\n      const photoURL = GetFile(result.data);\r\n      if (record.id) {\r\n        ProductAPI.update(record.id, { ...record, photoURL }).then((result) => {\r\n          dispatch(UpdateProduct(result.data));\r\n        });\r\n      }\r\n    });\r\n  };\r\n  const changeCategoryProduct = (record: IProduct, e: number | string) => {\r\n    if (record.id && typeof e === \"number\") {\r\n      ProductAPI.update(record.id, { ...record, categoryProductId: e }).then(\r\n        (result) => {\r\n          dispatch(UpdateProduct(result.data));\r\n        }\r\n      );\r\n    }\r\n  };\r\n  const columns = [\r\n    {\r\n      title: \"STT\",\r\n      dataIndex: \"id\",\r\n      render: (_: null, record: IProduct) => {\r\n        const idx = data.findIndex((el: IProduct) => el.id === record.id);\r\n        return <Typography.Title level={5}>{idx + 1}</Typography.Title>;\r\n      },\r\n    },\r\n    {\r\n      title: \"Tên\",\r\n      dataIndex: \"title\",\r\n      width: \"10%\",\r\n      editable: true,\r\n    },\r\n    {\r\n      title: \"Giá\",\r\n      dataIndex: \"price\",\r\n      width: \"10%\",\r\n      editable: true,\r\n      render: (_: null, record: IProduct) => {\r\n        return (\r\n          <>\r\n            {record.price?.toLocaleString(\"it-IT\", {\r\n              style: \"currency\",\r\n              currency: \"VND\",\r\n            })}\r\n          </>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Hình ảnh\",\r\n      width: \"10%\",\r\n      render: (_: null, record: IProduct) => {\r\n        return (\r\n          <>\r\n            <Upload\r\n              customRequest={(options) => {\r\n                if (options.onSuccess) {\r\n                  options.onSuccess(\"ok\");\r\n                }\r\n              }}\r\n              onChange={(e) => upload(record, e)}\r\n              maxCount={1}\r\n              showUploadList={false}\r\n            >\r\n              <Avatar\r\n                src={record.photoURL ? record.photoURL : productPNG}\r\n                size=\"large\"\r\n              />\r\n            </Upload>\r\n          </>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Màu sắc\",\r\n      dataIndex: \"color\",\r\n      width: \"7%\",\r\n      editable: true,\r\n    },\r\n    {\r\n      title: \"Danh mục sản phẩm\",\r\n      dataIndex: \"categoryProductId\",\r\n      render: (_: any, record: IProduct) => {\r\n        return (\r\n          <>\r\n            <Select\r\n              value={record.categoryProductId}\r\n              style={{ width: 180 }}\r\n              onChange={(e) => changeCategoryProduct(record, e)}\r\n            >\r\n              {categoryProduct.length > 0 &&\r\n                categoryProduct.map(\r\n                  (cateProduct: ICategoryProduct, index: number) => {\r\n                    return (\r\n                      <Option key={index} value={cateProduct.id}>\r\n                        {cateProduct.title}\r\n                      </Option>\r\n                    );\r\n                  }\r\n                )}\r\n            </Select>\r\n          </>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Mô tả\",\r\n      dataIndex: \"metaDescription\",\r\n      width: \"20%\",\r\n      editable: true,\r\n      render: (_: null, record: IProduct) => {\r\n        return (\r\n          <Tooltip\r\n            title={record.metaDescription}\r\n            style={{ height: 150 }}\r\n            placement=\"bottom\"\r\n          >\r\n            <Paragraph ellipsis={{ rows: 2, suffix: \"...\" }}>\r\n              {record.metaDescription}\r\n            </Paragraph>\r\n          </Tooltip>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Kích cỡ\",\r\n      dataIndex: \"size\",\r\n      width: \"7%\",\r\n      editable: true,\r\n    },\r\n    {\r\n      title: \"Thiết lập\",\r\n      render: (_: null, record: IProduct) => {\r\n        const editTable = isEditing(record);\r\n        return editTable ? (\r\n          <>\r\n            <Tooltip title=\"Lưu\">\r\n              <Typography.Link className=\"mr-4\" onClick={() => save(record)}>\r\n                <CheckOutlined style={{ fontSize: \"130%\" }} />\r\n              </Typography.Link>\r\n            </Tooltip>\r\n            <Tooltip title=\"Đóng\">\r\n              <Typography.Link onClick={cancel}>\r\n                <CloseOutlined style={{ fontSize: \"130%\" }} />\r\n              </Typography.Link>\r\n            </Tooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Tooltip title=\"Sửa\">\r\n              <Typography.Link\r\n                className=\"mr-4\"\r\n                disabled={editingKey !== undefined}\r\n                onClick={() => edit(record)}\r\n              >\r\n                <EditOutlined style={{ fontSize: \"130%\" }} />\r\n              </Typography.Link>\r\n            </Tooltip>\r\n            <Popconfirm\r\n              title=\"Bạn có chắc chắn muốn xóa không?\"\r\n              onConfirm={() => deleteRecord(record)}\r\n            >\r\n              <Typography.Link className=\"mr-4\">\r\n                <DeleteOutlined style={{ fontSize: \"130%\" }} />\r\n              </Typography.Link>\r\n            </Popconfirm>\r\n\r\n            <Tooltip title=\"Nhân bản\">\r\n              <Typography.Link>\r\n                <CopyOutlined style={{ fontSize: \"130%\" }} />\r\n              </Typography.Link>\r\n            </Tooltip>\r\n          </>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  const mergedColumns = columns.map((col) => {\r\n    if (!col.editable) {\r\n      return col;\r\n    }\r\n    return {\r\n      ...col,\r\n      onCell: (record: IProduct) => ({\r\n        record: record,\r\n        inputType: col.dataIndex === \"price\" ? \"number\" : \"text\",\r\n        dataIndex: col.dataIndex,\r\n        title: col.title,\r\n        editing: isEditing(record),\r\n      }),\r\n    };\r\n  });\r\n\r\n  const add = () => {\r\n    ProductAPI.create({\r\n      title: \"Product\",\r\n      price: 200000,\r\n      color: \"\",\r\n      size: \"S\",\r\n      metaDescription: \"\",\r\n    }).then((result) => {\r\n      dispatch(AddProduct(result.data));\r\n    });\r\n  };\r\n\r\n  const deleteRecord = (record: IProduct) => {\r\n    if (record.id) {\r\n      ProductAPI.delete(record.id)\r\n        .then(() => {\r\n          dispatch(DeleteProduct(record));\r\n        })\r\n        .catch((err) => {\r\n          message.error(\"Error\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Title level={3}>Sản phẩm</Title>\r\n      </Row>\r\n      <Row className=\"mb-4\">\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<PlusOutlined />}\r\n          className=\"mr-4\"\r\n          onClick={add}\r\n        >\r\n          Thêm mới\r\n        </Button>\r\n      </Row>\r\n      <Form form={form} component={false}>\r\n        <Table\r\n          columns={mergedColumns}\r\n          components={{\r\n            body: {\r\n              cell: EditableCell,\r\n            },\r\n          }}\r\n          dataSource={data}\r\n          bordered\r\n          rowKey=\"id\"\r\n          pagination={{ pageSize: 10 }}\r\n        />\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n"],"names":["CategoryProductAPI","_createClass","_classCallCheck","COMPONENT_NAME","fetchAll","request","method","Method","url","concat","params","filter","order","create","data","update","id","delete","ContainerAPI","upload","file","FormData","append","headers","EditableCell","_ref","editing","dataIndex","title","inputType","children","record","index","restProps","_objectWithoutProperties","_excluded","inputNode","_jsx","InputNumber","Input","_objectSpread","Form","name","style","margin","rules","required","message","GetFile","info","AppConfig","result","files","ProductAPI","createMulti","req","Title","Typography","Paragraph","Option","Select","Product","useAppSelector","GetProduct","categoryProduct","GetCategoryProduct","dispatch","useAppDispatch","useEffect","then","SetProduct","SetCategoryProduct","_Form$useForm","form","_slicedToArray","isEditing","editingKey","_useState","useState","_useState2","setEditingKey","cancel","undefined","mergedColumns","render","_","idx","findIndex","el","level","width","editable","_record$price","_Fragment","price","toLocaleString","currency","Upload","customRequest","options","onSuccess","onChange","e","originFileObj","photoURL","UpdateProduct","maxCount","showUploadList","Avatar","src","productPNG","size","value","categoryProductId","changeCategoryProduct","length","map","cateProduct","Tooltip","metaDescription","height","placement","ellipsis","rows","suffix","_jsxs","className","onClick","values","getFieldsValue","isError","getFieldsError","forEach","errors","errInfo","console","log","save","CheckOutlined","fontSize","CloseOutlined","disabled","setFieldsValue","edit","EditOutlined","Popconfirm","onConfirm","deleteRecord","DeleteOutlined","CopyOutlined","col","onCell","DeleteProduct","catch","err","Row","Button","type","icon","PlusOutlined","color","AddProduct","component","Table","columns","components","body","cell","dataSource","bordered","rowKey","pagination","pageSize"],"sourceRoot":""}