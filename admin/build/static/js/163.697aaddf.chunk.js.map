{"version":3,"file":"static/js/163.697aaddf.chunk.js","mappings":"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","sources":["apis/container.api.ts","helper/getAddress.helper.ts","helper/getFile.helper.ts","pages/account/ModalEditRoleAccount.tsx","pages/account/TableSettingItem.tsx","pages/account/index.tsx"],"sourcesContent":["import { Method, request } from \"../helper/request.helper\";\n\nexport class ContainerAPI {\n    static readonly COMPONENT_NAME: string = \"Containers\";\n\n    static upload = (file: File) => {\n        const data = new FormData();\n        data.append(\"file\", file);\n        return request({\n            method: Method.POST,\n            url: `/${this.COMPONENT_NAME}/image/upload`,\n            headers: {\n                \"Content-Type\": \"multipart/form-data\",\n            },\n            data,\n        });\n    };\n}\n","import axios from \"axios\";\n\nexport const getAddress = () => {\n  return axios\n    .get(\"https://provinces.open-api.vn/api/?depth=2\")\n    .then((result) => {\n      return result.data;\n    })\n    .catch((err) => console.log(\"err\"));\n};\n","import { AppConfig } from \"../AppConfig\";\nexport const GetFile = (info: any) => {\n  const photoURL = `${AppConfig.apiUrl}/Containers/image/download/${info.result.files.file[0].name}`;\n  return photoURL;\n};\n","import { message, Modal, Select } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { AccountAPI } from \"../../apis/account.api\";\nimport { useAppDispatch } from \"../../app/hooks\";\nimport { SetAccount } from \"../../app/reducers/Account/Account.reducer\";\nimport { IAccount } from \"../../interface/Account.interface\";\nimport \"./index.css\";\ninterface IModalEditRoleAccountProps {\n  showModal: boolean;\n  handleShowModal: (el: boolean) => void;\n  account: IAccount;\n}\n\nconst { Option } = Select;\nexport default function ModalEditRoleAccount(\n  props: IModalEditRoleAccountProps\n) {\n  const { showModal, handleShowModal, account } = props;\n  const dispatch = useAppDispatch();\n  const [roleId, setRoleId] = useState<number>(3);\n\n  useEffect(() => {\n    if (account.roles && account.roles.length > 0 && account.roles[0].id) {\n      setRoleId(account.roles[0].id);\n    }\n  }, [account]);\n\n  const submit = () => {\n    if (account.id) {\n      AccountAPI.changeRole(account.id, roleId)\n        .then(() => {\n          message.success(\"Thay đổi thành công!\");\n          AccountAPI.fetchAll().then((result) => {\n            dispatch(SetAccount(result.data));\n          });\n          handleShowModal(false);\n        })\n        .catch(() => {\n          message.error(\"Error!\");\n        });\n    }\n  };\n  return (\n    <>\n      <Modal\n        title=\"Thay đổi Role tài khoản\"\n        open={showModal}\n        onOk={submit}\n        onCancel={() => handleShowModal(false)}\n      >\n        <Select defaultValue={3} value={roleId} onChange={(e) => setRoleId(e)}>\n          <Option value={1}>SUPERADMIN</Option>\n          <Option value={2}>ADMIN</Option>\n          <Option value={3}>USER</Option>\n        </Select>\n      </Modal>\n    </>\n  );\n}\n","import { EditOutlined } from \"@ant-design/icons\";\nimport { Button, Row } from \"antd\";\nimport { useState } from \"react\";\nimport { IAccount } from \"../../interface/Account.interface\";\nimport ModalEditRoleAccount from \"./ModalEditRoleAccount\";\n\ninterface ITableSettingItemProps {\n  record: IAccount;\n}\nexport default function TableSettingItem(props: ITableSettingItemProps) {\n  const { record } = props;\n  const [showModal, setShowModal] = useState<boolean>(false);\n\n  const handleShowModal = (isShowModal: boolean) => {\n    setShowModal(isShowModal);\n  };\n\n  return (\n    <>\n      <Row style={{ width: 130 }} className=\"items-center justify-between\">\n        {record.roles && record.roles.length > 0 && record.roles[0].name}\n        <Button\n          icon={<EditOutlined twoToneColor=\"blue\" />}\n          type=\"ghost\"\n          onClick={() => handleShowModal(true)}\n        />\n      </Row>\n      {showModal && (\n        <ModalEditRoleAccount\n          showModal={showModal}\n          handleShowModal={handleShowModal}\n          account={record}\n        />\n      )}\n    </>\n  );\n}\n","import { DeleteOutlined } from \"@ant-design/icons\";\nimport {\n  Avatar, message,\n  Popconfirm,\n  Row,\n  Table,\n  Typography,\n  Upload\n} from \"antd\";\nimport { UploadChangeParam } from \"antd/es/upload\";\nimport { useEffect, useState } from \"react\";\nimport { AccountAPI } from \"../../apis/account.api\";\nimport { ContainerAPI } from \"../../apis/container.api\";\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\nimport {\n  DeleteAccount,\n  GetAccount,\n  SetAccount,\n  UpdateAccount\n} from \"../../app/reducers/Account/Account.reducer\";\nimport { selectUser, UpdateUser } from \"../../app/reducers/Auth/Auth.reducer\";\nimport productPNG from \"../../assets/images/product.png\";\nimport { getAddress } from \"../../helper/getAddress.helper\";\nimport { GetFile } from \"../../helper/getFile.helper\";\nimport { IAccount } from \"../../interface/Account.interface\";\nimport { ICity } from \"../../interface/Address.interface\";\nimport { IProduct } from \"../../interface/Product.interface\";\nimport \"./index.css\";\nimport TableSettingItem from \"./TableSettingItem\";\n\nconst { Title } = Typography;\n\nexport default function Account() {\n  const data = useAppSelector(GetAccount);\n  const auth = useAppSelector(selectUser);\n  const dispatch = useAppDispatch();\n\n  const [location, setLocation] = useState<ICity[]>([]);\n\n  useEffect(() => {\n    searchLocation();\n  }, []);\n  useEffect(() => {\n    AccountAPI.fetchAll().then((result) => {\n      dispatch(SetAccount(result.data));\n    });\n  }, [dispatch]);\n\n  const searchLocation = async () => {\n    const result = await getAddress();\n    setLocation(result);\n  };\n\n  const upload = (record: IAccount, info: UploadChangeParam) => {\n    ContainerAPI.upload(info.file.originFileObj as File).then((result) => {\n      const photoURL = GetFile(result.data);\n      if (record.id) {\n        AccountAPI.update(record.id, { ...record, avatar: photoURL }).then(\n          (result) => {\n            dispatch(UpdateAccount(result.data));\n            dispatch(UpdateUser(result.data));\n          }\n        );\n      }\n    });\n  };\n\n  const columns = [\n    {\n      title: \"STT\",\n      dataIndex: \"id\",\n      render: (_: null, record: IAccount) => {\n        const idx = data.findIndex((el: IAccount) => el.id === record.id);\n        return <Typography.Title level={5}>{idx + 1}</Typography.Title>;\n      },\n    },\n    {\n      title: \"Tên\",\n      width: \"20%\",\n      render: (_: null, record: IAccount) => {\n        return (\n          <>\n            {record.firstName} {record.lastName}\n          </>\n        );\n      },\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n      width: \"10%\",\n    },\n    {\n      title: \"Số điện thoại\",\n      dataIndex: \"phoneNumber\",\n      width: \"10%\",\n    },\n    {\n      title: \"Địa chỉ\",\n      width: \"10%\",\n      render: (_: null, record: IAccount) => {\n        const city = location.find((el) => el.code === record.city);\n        const district = city?.districts.find(\n          (el) => el.code === record.district\n        );\n        return (\n          <>\n            {district?.name} - {city?.name}\n          </>\n        );\n      },\n    },\n    {\n      title: \"Avatar\",\n      width: \"10%\",\n      render: (_: null, record: IAccount) => {\n        return (\n          <>\n            <Upload\n              customRequest={(options) => {\n                if (options.onSuccess) {\n                  options.onSuccess(\"ok\");\n                }\n              }}\n              onChange={(e) => upload(record, e)}\n              maxCount={1}\n              showUploadList={false}\n              className=\"cursor-pointer\"\n              disabled={auth?.id !== record.id}\n            >\n              <Avatar\n                src={record.avatar ? record.avatar : productPNG}\n                size=\"large\"\n              />\n            </Upload>\n          </>\n        );\n      },\n    },\n    {\n      title: \"Role\",\n      width: \"10%\",\n      render: (_: null, record: IAccount) => {\n        return <TableSettingItem record={record} />;\n      },\n    },\n    {\n      title: \"Thiết lập\",\n      render: (_: null, record: IAccount) => {\n        return (\n          <>\n            <Popconfirm\n              title=\"Bạn có chắc chắn muốn xóa không?\"\n              onConfirm={() => deleteRecord(record)}\n            >\n              <Typography.Link className=\"mr-4\">\n                <DeleteOutlined style={{ fontSize: \"130%\" }} />\n              </Typography.Link>\n            </Popconfirm>\n          </>\n        );\n      },\n    },\n  ];\n\n  const deleteRecord = (record: IProduct) => {\n    if (record.id) {\n      AccountAPI.delete(record.id)\n        .then(() => {\n          dispatch(DeleteAccount(record));\n        })\n        .catch((err) => {\n          message.error(\"Error\");\n        });\n    }\n  };\n\n  return (\n    <>\n      <Row>\n        <Title level={3}>Người dùng</Title>\n      </Row>\n      <Table\n        columns={columns}\n        dataSource={data}\n        bordered\n        rowKey=\"id\"\n        pagination={{ pageSize: 10 }}\n      />\n    </>\n  );\n}\n"],"names":["ContainerAPI","_createClass","_classCallCheck","COMPONENT_NAME","upload","file","data","FormData","append","request","method","Method","url","concat","headers","getAddress","axios","then","result","catch","err","console","log","GetFile","info","AppConfig","files","name","Option","Select","ModalEditRoleAccount","props","showModal","handleShowModal","account","dispatch","useAppDispatch","_useState","useState","_useState2","_slicedToArray","roleId","setRoleId","useEffect","roles","length","id","_jsx","_Fragment","children","Modal","title","open","onOk","AccountAPI","message","SetAccount","onCancel","_jsxs","defaultValue","value","onChange","e","TableSettingItem","record","setShowModal","isShowModal","Row","style","width","className","Button","icon","EditOutlined","twoToneColor","type","onClick","Title","Typography","Account","useAppSelector","GetAccount","auth","selectUser","location","setLocation","searchLocation","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","stop","apply","arguments","columns","dataIndex","render","_","idx","findIndex","el","level","firstName","lastName","city","find","code","district","districts","Upload","customRequest","options","onSuccess","originFileObj","photoURL","_objectSpread","avatar","UpdateAccount","UpdateUser","maxCount","showUploadList","disabled","Avatar","src","productPNG","size","Popconfirm","onConfirm","deleteRecord","DeleteOutlined","fontSize","DeleteAccount","Table","dataSource","bordered","rowKey","pagination","pageSize"],"sourceRoot":""}