"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[322],{5322:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(1413),a=n(4165),i=n(3433),o=n(5861),c=n(9439),l=n(9286),d=n(1752),s=n(732),u=n(7575),f=n(9529),m=n(2622),h=n(8302),p=n(6106),x=n(7309),Z=n(7846),b=n(1082),v=n(4942),g=n(1694),j=n.n(g),y=n(2791),w=n(1929),N=n(5564),O=n(9922),E=n(7521),T=function(e){var t,n=e.componentCls,r=e.sizePaddingEdgeHorizontal,a=e.colorSplit,i=e.lineWidth;return(0,v.Z)({},n,Object.assign(Object.assign({},(0,E.Wf)(e)),(t={borderBlockStart:"".concat(i,"px solid ").concat(a),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:"0 ".concat(e.dividerVerticalGutterMargin,"px"),verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat(i,"px solid ").concat(a)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat(e.dividerHorizontalGutterMargin,"px 0")}},(0,v.Z)(t,"&-horizontal".concat(n,"-with-text"),{display:"flex",alignItems:"center",margin:"".concat(e.dividerHorizontalWithTextGutterMargin,"px 0"),color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(a),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat(i,"px solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}}),(0,v.Z)(t,"&-horizontal".concat(n,"-with-text-left"),{"&::before":{width:"5%"},"&::after":{width:"95%"}}),(0,v.Z)(t,"&-horizontal".concat(n,"-with-text-right"),{"&::before":{width:"95%"},"&::after":{width:"5%"}}),(0,v.Z)(t,"".concat(n,"-inner-text"),{display:"inline-block",padding:"0 1em"}),(0,v.Z)(t,"&-dashed",{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:"".concat(i,"px 0 0")}),(0,v.Z)(t,"&-horizontal".concat(n,"-with-text").concat(n,"-dashed"),{"&::before, &::after":{borderStyle:"dashed none none"}}),(0,v.Z)(t,"&-vertical".concat(n,"-dashed"),{borderInlineStart:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0}),(0,v.Z)(t,"&-plain".concat(n,"-with-text"),{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize}),(0,v.Z)(t,"&-horizontal".concat(n,"-with-text-left").concat(n,"-no-default-orientation-margin-left"),(0,v.Z)({"&::before":{width:0},"&::after":{width:"100%"}},"".concat(n,"-inner-text"),{paddingInlineStart:r})),(0,v.Z)(t,"&-horizontal".concat(n,"-with-text-right").concat(n,"-no-default-orientation-margin-right"),(0,v.Z)({"&::before":{width:"100%"},"&::after":{width:0}},"".concat(n,"-inner-text"),{paddingInlineEnd:r})),t)))},k=(0,N.Z)("Divider",(function(e){var t=(0,O.TS)(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[T(t)]}),{sizePaddingEdgeHorizontal:0}),C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var S=function(e){var t,n=y.useContext(w.E_),r=n.getPrefixCls,a=n.direction,i=e.prefixCls,o=e.type,l=void 0===o?"horizontal":o,d=e.orientation,s=void 0===d?"center":d,u=e.orientationMargin,f=e.className,m=e.rootClassName,h=e.children,p=e.dashed,x=e.plain,Z=C(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain"]),b=r("divider",i),g=k(b),N=(0,c.Z)(g,2),O=N[0],E=N[1],T=s.length>0?"-".concat(s):s,S=!!h,I="left"===s&&null!=u,M="right"===s&&null!=u,P=j()(b,E,"".concat(b,"-").concat(l),(t={},(0,v.Z)(t,"".concat(b,"-with-text"),S),(0,v.Z)(t,"".concat(b,"-with-text").concat(T),S),(0,v.Z)(t,"".concat(b,"-dashed"),!!p),(0,v.Z)(t,"".concat(b,"-plain"),!!x),(0,v.Z)(t,"".concat(b,"-rtl"),"rtl"===a),(0,v.Z)(t,"".concat(b,"-no-default-orientation-margin-left"),I),(0,v.Z)(t,"".concat(b,"-no-default-orientation-margin-right"),M),t),f,m),z=Object.assign(Object.assign({},I&&{marginLeft:u}),M&&{marginRight:u});return O(y.createElement("div",Object.assign({className:P},Z,{role:"separator"}),h&&"vertical"!==l&&y.createElement("span",{className:"".concat(b,"-inner-text"),style:z},h)))},I=n(1190),M=n(3144),P=n(5671),z=n(1186),W=(0,M.Z)((function e(){(0,P.Z)(this,e)}));W.COMPONENT_NAME="Teams",W.fetchAll=function(){return(0,z.W)({method:z.n.GET,url:"/".concat(W.COMPONENT_NAME),params:{filter:{order:"createdAt DESC"}}})},W.fetchAllMembers=function(){return(0,z.W)({method:z.n.GET,url:"/".concat(W.COMPONENT_NAME),params:{filter:{include:"members",order:"createdAt DESC"}}})},W.create=function(e){return(0,z.W)({method:z.n.POST,url:"/".concat(W.COMPONENT_NAME),data:e})},W.put=function(e){return(0,z.W)({method:z.n.PUT,url:"/".concat(W.COMPONENT_NAME),data:e})},W.update=function(e,t){return(0,z.W)({method:z.n.PATCH,url:"/".concat(W.COMPONENT_NAME,"/").concat(e),data:t})},W.delete=function(e){return(0,z.W)({method:z.n.DELETE,url:"/".concat(W.COMPONENT_NAME,"/").concat(e)})};var A=n(4740),B=n(6333),G=n(9555),L=n(7027),_=n(1990),D=n(177),F=n(1960),H=n(184),X=h.Z.Text,V=G.Z.Option;function U(e){var t=e.modalOpen,n=e.setModalOpen,l=e.team,d=Z.Z.useForm(),s=(0,c.Z)(d,1)[0],u=(0,A.C)(B.U2)[0],f=(0,A.T)(),m=(0,y.useState)([]),b=(0,c.Z)(m,2),v=b[0],g=b[1];(0,y.useEffect)((function(){f((0,F._6)(!1)),j()}),[f]);var j=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===l||void 0===l||!l.id){e.next=5;break}return e.next=3,I.f.fetchWhereTeam(l.id).then((function(e){return g(e.data)}));case 3:e.next=7;break;case 5:return e.next=7,I.f.fetchWhereNoTeam().then((function(e){return g(e.data)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){s.setFieldsValue((0,r.Z)((0,r.Z)({},s.getFieldsValue()),{},{name:null===l||void 0===l?void 0:l.name,leaderId:null===l||void 0===l?void 0:l.leaderId}))}),[l,s]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(_.Z,{destroyOnClose:!0,title:null!==l&&void 0!==l&&l.id?(0,H.jsx)(h.Z.Text,{children:"C\u1eadp nh\u1eadt Team"}):(0,H.jsx)(h.Z.Text,{children:"Th\xeam Team"}),style:{top:20},open:t,onOk:function(){return n(!1)},onCancel:function(){return n(!1)},footer:null,forceRender:!0,children:(0,H.jsxs)(Z.Z,{form:s,onFinish:function(e){void 0===e.leaderId&&(e.leaderId=null),W.put(null!==l&&void 0!==l&&l.id?(0,r.Z)((0,r.Z)({},e),{},{id:l.id}):e).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.data.leaderId){e.next=8;break}return e.next=3,I.f.getAccountById(t.data.leaderId).then((function(e){return e.data}));case 3:o=e.sent,I.f.update(t.data.leaderId,(0,r.Z)((0,r.Z)({},o),{},{teamId:t.data.id})).then((function(e){var t;f((0,B.X4)((0,r.Z)((0,r.Z)({},u),{},{members:null===(t=u.members)||void 0===t?void 0:t.filter((function(t){return t.id!==e.data.id}))})))})),f((0,B.d$)((0,r.Z)((0,r.Z)({},t.data),{},{members:null!==l&&void 0!==l&&l.members?(0,i.Z)(l.members):[(0,r.Z)((0,r.Z)({},o),{},{teamId:t.data.id})]}))),e.next=9;break;case 8:f((0,B.d$)((0,r.Z)((0,r.Z)({},t.data),{},{members:[]})));case 9:L.ZP.success("Success!"),n(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){L.ZP.error("Error",e)}))},onFinishFailed:function(){L.ZP.error("Error!")},colon:!1,autoComplete:"off",children:[(0,H.jsx)(X,{children:"T\xean Team"}),(0,H.jsx)(Z.Z.Item,{name:"name",required:!0,label:"",children:(0,H.jsx)(D.Z,{})}),(0,H.jsx)(X,{children:"Leader"}),(0,H.jsx)(Z.Z.Item,{name:"leaderId",required:!0,label:"",children:(0,H.jsx)(G.Z,{children:v.length>0&&v.map((function(e,t){return(0,H.jsxs)(V,{value:e.id,children:[e.name,"-",e.email]},t)}))})}),(0,H.jsxs)(p.Z,{className:"justify-end",children:[(0,H.jsx)(x.ZP,{className:"mr-4",onClick:function(){return n(!1)},children:"\u0110\xf3ng"}),(0,H.jsx)(x.ZP,{type:"primary",htmlType:"submit",children:"L\u01b0u"})]})]})})})}var q=h.Z.Text;function R(){var e=(0,A.C)(B.U2),t=(0,A.T)(),n=(0,y.useState)(!1),v=(0,c.Z)(n,2),g=v[0],j=v[1],w=(0,y.useState)({}),N=(0,c.Z)(w,2),O=N[0],E=N[1],T=(0,y.useState)({}),k=(0,c.Z)(T,2),C=k[0],M=k[1],P=(0,y.useState)({}),z=(0,c.Z)(P,2),G=z[0],L=z[1],_=(0,y.useState)(!1),D=(0,c.Z)(_,2),F=D[0],X=D[1],V=1/e.length*100-2;(0,y.useEffect)((function(){R()}),[t]);var R=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.f.fetchWhereNoTeam().then((function(e){return{name:"Ch\u01b0a v\xe0o team",members:e.data}}));case 2:return n=e.sent,e.next=5,W.fetchAllMembers().then((function(e){t((0,B.ae)([n].concat((0,i.Z)(e.data))))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,o){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,r.Z)((0,r.Z)({},O),{},{teamId:o.id?o.id:null}),!O.id||o.id===C.id){e.next=4;break}return e.next=4,I.f.update(O.id,c).then((function(){var e;t((0,B.X4)((0,r.Z)((0,r.Z)({},C),{},{leaderId:C.leaderId===O.id?null:C.leaderId,members:null===(e=C.members)||void 0===e?void 0:e.filter((function(e){return e.id!==O.id}))}))),o.members&&t((0,B.X4)((0,r.Z)((0,r.Z)({},o),{},{members:[].concat((0,i.Z)(o.members),[c])})))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(o){var c,l,d;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=e[0],!o.id){n.next=7;break}return l=o.members,d=[],null===l||void 0===l||l.map((function(e){return d.push((0,r.Z)((0,r.Z)({},e),{},{teamId:null}))})),n.next=7,W.delete(o.id).then((function(){t((0,B.ps)(o)),t((0,B.X4)((0,r.Z)((0,r.Z)({},c),{},{members:c.members?[].concat((0,i.Z)(c.members),d):[].concat(d)})))}));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(U,{modalOpen:g,setModalOpen:j,team:G}),(0,H.jsxs)(p.Z,{className:"flex justify-between",children:[(0,H.jsx)(x.ZP,{type:"primary",disabled:!F,icon:(0,H.jsx)(l.Z,{}),className:"mb-4",onClick:function(){L({}),j(!0)}}),F?(0,H.jsxs)(p.Z,{className:"w-24 justify-between",children:[(0,H.jsx)(x.ZP,{type:"dashed",onClick:function(){return X(!1)},icon:(0,H.jsx)(s.Z,{style:{fontSize:"130%",color:"797978"}}),className:"flex justify-center items-center"}),(0,H.jsx)(x.ZP,{type:"primary",className:"flex justify-center items-center",icon:(0,H.jsx)(u.Z,{style:{fontSize:"130%"}}),onClick:function(){return X(!1)}})]}):(0,H.jsx)(x.ZP,{type:"primary",className:"mb-4",onClick:function(){return X(!0)},children:(0,H.jsx)(d.Z,{})})]}),(0,H.jsx)("div",{className:"flex justify-between",children:e.length>0&&e.map((function(e,t){var n,r;return(0,H.jsxs)(Z.Z,{disabled:!F,className:"boxs rounded-lg bg-[#dcd5d5] overflow-hidden p-2 ",style:F?{width:"".concat(V,"%")}:{width:"".concat(V,"%"),opacity:.7},onDrop:function(t){F&&$(t,e)},onDragOver:function(e){return function(e){e.preventDefault()}(e)},children:[(0,H.jsxs)("div",{className:"w-full h-[60px]  text-[15px] font-bold flex justify-between uppercase items-center gap-2",children:[(0,H.jsxs)(q,{className:"flex items-center justify-between",children:[(0,H.jsx)("div",{className:"text-blue-500",title:e.name,children:e.name}),(0,H.jsxs)("span",{className:"ml-2 leading-[5px] p-2",children:[null===(n=e.members)||void 0===n?void 0:n.length,"\xa0 ",(0,H.jsx)(f.Z,{})]})]}),t>0&&(0,H.jsxs)(p.Z,{children:[(0,H.jsx)(h.Z.Link,{disabled:!F,className:"mr-4",onClick:function(){L(e),j(!0)},children:(0,H.jsx)(d.Z,{style:{fontSize:"130%"}})}),(0,H.jsx)(b.Z,{title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?",onConfirm:function(){Y(e)},children:(0,H.jsx)(h.Z.Link,{disabled:!F,children:(0,H.jsx)(m.Z,{style:{fontSize:"130%"}})})})]})]}),(0,H.jsx)(S,{style:{marginTop:0,marginBottom:8}}),(0,H.jsx)("div",{className:"widgets h-[400px] w-full flex justify-start items-center flex-col gap-2",children:null===(r=e.members)||void 0===r?void 0:r.map((function(t,n){return(0,H.jsxs)("div",{className:"text-[20px] rounded-[5px] bg-white  min-h-10 flex flex-col justify-center items-start p-4 w-full",draggable:F,onDragStart:function(n){return function(e,t,n){E(t),M(n)}(0,t,e)},children:[(0,H.jsxs)("p",{className:"text-[15px]",children:[t.name," ",t.id===e.leaderId?"(Leader)":""]}),(0,H.jsx)("p",{className:"text-[10px]",children:t.email})]},n)}))})]},t)}))})]})}}}]);
//# sourceMappingURL=322.74058be2.chunk.js.map